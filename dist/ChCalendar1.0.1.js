!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ChCalendar",[],e):"object"==typeof exports?exports.ChCalendar=e():t.ChCalendar=e()}(this,function(){return function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){var n=a(1);n.Double=a(3),n.Normal=a(4),t.exports=n},function(t,e,a){var n,r,i={msg:{success:"success",disable:"disable",error:"error"},event:{changeDay:"changeDay",changeMonth:"changeMonth",changeYear:"changeYear",pre:"pre",next:"next"},year:{first:1900,last:2099},format:"yyyy/mm/dd"},o={intervals:{show:!0,max:15,min:1},type:"day",format:i.format,classPrefix:"Ch",disableSelect:!1,language:"zh_CN",supplement:!0,preNextButton:{pre:!0,next:!0},date:{}},s={zh_CN:{Mon:"一",Tue:"二",Wed:"三",Thu:"四",Fri:"五",Sat:"六",Sun:"日",Year:"年",Month:"月"},en_US:{Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",Sun:"Sun",Year:"Year",Month:"Month"}};n={init:function(t){var e="",a=t.currentDate?t.currentDate:new Date;switch(t.renderType){case"day":e=this.createDay(t,a);break;case"month":e=this.createMonth(t,a);break;default:e=this.createYear(t,a)}var n='<div class="'+t.classPrefix+'_Calendar">'+e+"</div>";return n},createDay:function(t,e){var a=new Date(e),n={year:a.getFullYear(),month:a.getMonth()+1,type:"day"},r=this.header(t,n),i=this.weeks(t),o=this.dayTabel(t,n),s=r+i+o;return s},dayTabel:function(t,e){for(var a=e.year,n=l.util.addZero(e.month),o=l.util.MonthHasDay(a,n)+1,s=a+"/"+n,c=l.util.isWeeks(s),d=l.util.calculationMonth(a+"/"+n,-1),u=d.getFullYear(),f=l.util.addZero(d.getMonth()+1),h=l.util.calculationMonth(a+"/"+n),g=h.getFullYear(),m=l.util.addZero(h.getMonth()+1),D=7-(8-c),p='<div class="'+t.classPrefix+'_Calendar_table">',y=l.util.formatDate(new Date,i.format),v=D;v>0;v--){var C=l.util.calculationTime(s,-v).getDate(),$=u+"/"+f+"/"+C,b='<span class="'+t.classPrefix+'Calendar_day preDay"><i></i></span>';if(t.supplement){var x=r.isDayStatus(t,$),_='target-type="day"';"disable"===x&&(_=""),b="<span "+_+' class="'+t.classPrefix+"_Calendar_day preDay "+x+'" data-type="'+$+'"><i>'+C+"</i></span>"}p+=b}for(var v=1;v<o;v++){var C=l.util.addZero(v),$=a+"/"+n+"/"+C,x=r.isDayStatus(t,$),_='target-type="day"';"disable"===x&&(_="");var b="<span "+_+' class="'+t.classPrefix+"_Calendar_day "+x+'" data-type="'+$+'"><i>'+v+"</i>";y===$&&(b+="<em>toDay</em>",y=!1),p+=b+"</span>"}for(var v=1,M=43-(o+D);v<=M;v++){var C=l.util.addZero(v);if($=g+"/"+m+"/"+C,b='<span class="'+t.classPrefix+'_Calendar_day nextDay"><i></i></span>',t.supplement){var x=r.isDayStatus(t,$),_='target-type="day"';"disable"===x&&(_=""),b="<span "+_+' class="'+t.classPrefix+"_Calendar_day nextDay "+x+'" data-type="'+$+'"><i>'+v+"</i></span>"}p+=b}return p+="</div>"},createMonth:function(t,e){var a=new Date(e),n={year:a.getFullYear(),month:a.getMonth()+1,type:"month"},r=this.header(t,n)+this.monthTable(n,t.classPrefix);return r},monthTable:function(t,e){for(var a='<div class="'+e+'_Calendar_table">',n="",r=1;r<13;r++){var i=l.util.addZero(r);n=i==t.month?"choose":"",a+='<span target-type="month" class="'+e+"_Calendar_month "+n+'" data-type="'+t.year+"/"+i+'"><i>'+r+"月</i></span>"}return a+"</div>"},createYear:function(t,e){for(var a,n=new Date(e),r=n.getFullYear(),o=i.year.first;o<i.year.last;)if(o+=12,r<=o){a={start:o-12,end:o,year:r};break}var s=this.header(t,a)+this.yearTable(a,t.classPrefix);return s},yearTable:function(t,e){for(var a='<div class="'+e+'_Calendar_table">',n="",r=t.start,i=r+12;r<i;r++)n=r==t.year?"choose":"",a+='<span target-type="year" class="'+e+"_Calendar_year "+n+'" data-type="'+r+'"><i>'+r+"</i></span>";return a+="</div>"},header:function(t,e){var a='<div class="'+t.classPrefix+'_Calendar_header">',n='<b target-type="title" class="'+t.classPrefix+'_Calendar_title">';return t.preNextButton&&!t.preNextButton.pre||(a+='<i target-type="pre" class="'+t.classPrefix+'_Calendar_pre">pre</i>'),"day"===e.type||"month"===e.type?(n+=e.year+t.language.Year,"day"===e.type&&(n+=e.month+t.language.Month)):n+=e.start+"-"+e.end,a+=n+"</b>",t.preNextButton&&!t.preNextButton.next||(a+='<i target-type="next" class="'+t.classPrefix+'_Calendar_next">next</i>'),a+="</div>"},weeks:function(t){var e=[t.language.Mon,t.language.Tue,t.language.Wed,t.language.Thu,t.language.Fri,t.language.Sat,t.language.Sun],a="",n=0;for(a+='<div class="'+t.classPrefix+'_Calendar_week">';n<e.length;n++)a+="<em>"+e[n]+"</em>";return a+="</div>"},selectedStyle:function(t,e){var a=0,e=e,n=e.length,r=$(t);for(r.find("span").removeClass("choose"),r.find('[data-type="'+e[0]+'"]').addClass("choose_start"),r.find('[data-type="'+e[n-1]+'"]').addClass("choose_end");a<n;a++)r.find('[data-type="'+e[a]+'"]').addClass("choose")}},r={init:function(t){var e=$.extend(!0,{},t);this.dateOperation(e),this.reloadCalendar(e),this.eventBind(e,t),this.watchEvent(e,t)},watchEvent:function(t,e){var a=this;$(e).on("setDate",function(e,n){t.o.date=n.date?n.date:t.o.date,a.dateOperation(t,n.callback),a.reloadCalendar(t)}),$(e).on("setCurrentPanel",function(e,n){a.setCurrentPanel(t,n),a.reloadCalendar(t)})},dateOperation:function(t,e){var a=i.msg.success,n=!1;if(t.o.date&&t.o.date.start&&t.o.date.end){t.o.date.start=l.util.formatDate(t.o.date.start,i.format),t.o.date.end=l.util.formatDate(t.o.date.end,i.format);var r=l.util.getDateInterval(t.o.date.start,t.o.date.end),o=r.length;o>1&&("number"==typeof t.o.intervals.max&&o>t.o.intervals.max&&(r.length=t.o.intervals.max,t.o.date.end=r[r.length-1],a=i.msg.error),"number"==typeof t.o.intervals.min&&o<t.o.intervals.min&&(r.length=t.o.intervals.min,a=i.msg.error)),t.o.cacheDates=r}else a=i.msg.error,t.o.date.start=l.util.formatDate(new Date,i.format),t.o.date.end=t.o.date.start,t.o.cacheDates=[t.o.date.start];var c={disable:t.o.disable,first:t.o.intervals.first,last:t.o.intervals.last};c.disable&&(n=this.testDateDisable(c,t.o.cacheDates)),n||(this.testDateDisable(c,t.o.date.start)||this.testDateDisable(c,t.o.date.end))&&(n=!0);var d=t.o.intervals;if(d.first&&(d.first=l.util.formatDate(d.first,i.format)),d.last&&(d.last=l.util.formatDate(d.last,i.format)),t.o.disable)for(var u=0,f=t.o.disable.length;u<f;u++)t.o.disable[u]=l.util.formatDate(t.o.disable[u],i.format);this.setCurrentPanel(t,{renderType:t.o.type,language:s[t.o.language],supplement:t.o.supplement,cacheDates:t.o.cacheDates,disable:t.o.disable,intervals:t.o.intervals,classPrefix:t.o.classPrefix}),e&&e({msg:a})},setCurrentPanel:function(t,e){t.domConfig=t.domConfig?$.extend({},t.domConfig,e):$.extend({},t.o,e),t.domConfig.currentDate||(t.domConfig.currentDate=t.o.currentDate||t.o.date.start),t.domConfig.currentDate=l.util.formatDate(t.domConfig.currentDate,i.format)},reloadCalendar:function(t){t.$html=$(n.init(t.domConfig)),t.$target.html("").append(t.$html)},eventBind:function(t,e){var a=this,r=t.o;r.disableSelect||("day"===r.type?$(t.$target).on("click.selectDay",'[target-type="day"]',function(){var r=$(this),o=r.data("type"),s=a.cacheDate(t,o,e);t.domConfig.cacheDates=t.o.cacheDates,r.hasClass("nextDay")||r.hasClass("preDay")?(t.domConfig.date=t.o.date,t.domConfig.currentDate=o,a.reloadCalendar(t)):n.selectedStyle(t.$html,t.o.cacheDates),$(e).trigger(i.event.changeDay,[s])}):"month"===r.type),"day"===r.type&&$(t.$target).on("click.selectMonth",'[target-type="month"]',function(){var n=$(this).data("type");t.domConfig.currentDate=n,t.domConfig.renderType="day",a.reloadCalendar(t),$(e).trigger(i.event.changeMonth,[l.util.formatDate(n,t.o.format)])}),$(t.$target).on("click.selectYear",'[target-type="year"]',function(){var n=$(this).data("type");t.domConfig.currentDate=n+"/"+(new Date(t.domConfig.currentDate).getMonth()+1),t.domConfig.renderType="month",a.reloadCalendar(t),$(e).trigger(i.event.changeYear,[l.util.formatDate(n,r.format)])}),$(t.$target).on("click.header",".Ch_Calendar_header i,.Ch_Calendar_header b",function(n){var r=$(n.target),i=r.attr("target-type"),o=!0,s={type:t.domConfig.renderType};switch(i){case"pre":a.pre(t),s.currentDate=t.domConfig.currentDate,$(e).trigger("pre",[s]);break;case"next":a.next(t),s.currentDate=t.domConfig.currentDate,$(e).trigger("next",[s]);break;default:switch(t.domConfig.renderType){case"day":t.domConfig.renderType="month";break;case"month":t.domConfig.renderType="year";break;case"year":}}o&&a.reloadCalendar(t)})},cacheDate:function(t,e,a){var n,r,o,s=!0,c={disable:t.o.disable,first:t.o.intervals.first,last:t.o.intervals.last};n=t.o.intervals.show&&1==t.o.cacheDates.length?{start:t.o.date.start,end:e}:{start:e,end:e},r=l.util.getDateInterval(n.start,n.end);var d=r.length;if(d>1){if("number"==typeof t.o.intervals.max&&d>t.o.intervals.max)return r.length=t.o.intervals.max,a.o.date.end=r[r.length-1],{date:a.o.date,msg:i.msg.error};if("number"==typeof t.o.intervals.min&&d<t.o.intervals.min)return r.length=t.o.intervals.min,{date:a.o.date,msg:i.msg.error}}for(var u=0,f=r.length;u<f;u++)if(this.testDateDisable(c,r[u])){s=!1;break}return n={start:r[0],end:r[r.length-1]},o={date:n,msg:i.msg.disable},s&&(o.msg=i.msg.success,t.o.date=n,t.o.cacheDates=r,a.o.date={start:l.util.formatDate(n.start,t.o.format),end:l.util.formatDate(n.end,t.o.format)}),o},testDateDisable:function(t,e){var a=!1,n=!1,r=!1,i=!1;if(t)if(e.constructor!==Array)t.last&&(r=l.util.testMacthMax(e,t.last)),t.first&&(n=l.util.testMacthMin(e,t.first)),t.disable&&t.disable.length>0&&(i=l.util.testDate(e,t.disable)),(r||n||i)&&(a=!0);else if(t.disable&&t.disable.length>0)for(var o=0,s=t.disable.length;o<s;o++)if(l.util.testDate(t.disable[o],e)){a=!0;break}return a},isDayStatus:function(t,e){var a="",n={disable:t.disable,first:t.intervals.first,last:t.intervals.last};return this.testDateDisable(n,e)?a="disable":l.util.testDate(e,t.cacheDates)&&(a="choose"),a},next:function(t){var e,a=t.domConfig;switch(a.renderType){case"day":e=l.util.formatDate(l.util.calculationMonth(a.currentDate,1),i.format);break;case"month":var n=parseInt(a.currentDate.substring(0,4))+1,r=a.currentDate.substring(4,10);e=n+r;break;case"year":var n=parseInt(a.currentDate.substring(0,4))+12,r=a.currentDate.substring(4,10);e=n+r}this.setCurrentPanel(t,{currentDate:e}),this.reloadCalendar(t)},pre:function(t){var e,a=t.domConfig;switch(a.renderType){case"day":e=l.util.formatDate(l.util.calculationMonth(a.currentDate,-1),i.format);break;case"month":var n=parseInt(a.currentDate.substring(0,4))-1,r=a.currentDate.substring(4,10);e=n+r;break;case"year":var n=parseInt(a.currentDate.substring(0,4))-12,r=a.currentDate.substring(4,10);e=n+r}this.setCurrentPanel(t,{currentDate:e}),this.reloadCalendar(t)}};var l=function(t,e){this.o=$.extend(!0,{},o,e),this.$target=$(t),r.init(this)};l.prototype={setDates:function(t,e){var a={start:l.util.formatDate(t.start,i.format),end:l.util.formatDate(t.end,i.format)};$(this).trigger("setDate",[{date:a,callback:e}])},setCurrentPanels:function(t){var e={currentDate:t.currentDate||this.o.date.start,renderType:t.type||this.o.type};e.currentDate=l.util.formatDate(e.currentDate,i.format),this.currentDate=e.currentDate,$(this).trigger("setCurrentPanel",[e])},dispose:function(){for(var t in this)"function"!=typeof this[t]&&(this[t]=null,delete this[t])}},l.util=a(2),t.exports=l},function(t,e){var a={LeapPingnian:function(t){return t%4==0&&t%100!=0||t%400==0},MonthHasDay:function(t,e){var a=[1,3,5,7,8,10,12],n=parseInt(e),r=30,i=this.LeapPingnian(t);return 2==n?r=i?29:28:$.inArray(n,a)>-1&&(r=31),r},isWeeks:function(t){var e;return e=void 0===typeof t?(new Date).getDay():new Date(t).getDay(),0==e&&(e=7),e},addZero:function(t){var e=parseInt(t);return e<10&&(e="0"+e),e},calculationTime:function(t,e){var t=t,a=24*e*60*60*1e3;return t=t?new Date(t).valueOf():(new Date).valueOf(),t=new Date(t+a)},calculationMonth:function(t,e){var a=t?new Date(t):new Date,e=void 0===e?-1:e,n=a.getMonth()+e;return a.setMonth(n),a},testDate:function(t,e){var a=t?new Date(t).getTime():(new Date).getTime(),n=!1;if(e instanceof Array)for(var r=0,i=e.length;r<i;r++){var o=new Date(e[r]).getTime();if(a===o){n=!0;break}}else a===new Date(e).getTime()&&(n=!0);return n},testMacthMax:function(t,e){var a=new Date(t).getTime(),e=new Date(e).getTime(),n=!1;return a>e&&(n=!0),n},testMacthMin:function(t,e){var a=new Date(t).getTime(),e=new Date(e).getTime(),n=!1;return a<e&&(n=!0),n},getDateInterval:function(t,e){var a=new Date(t).getTime(),n=new Date(e).getTime(),r=864e5,i=a-n,o=[];if(i<r&&i>-r){var s=new Date(a),l=s.getFullYear(),c=this.addZero(s.getMonth()+1),d=this.addZero(s.getDate());o.push(l+"/"+c+"/"+d)}else if(a<n)for(var u=a,f=n+r;u<f;){var s=new Date(u),l=s.getFullYear(),c=this.addZero(s.getMonth()+1),d=this.addZero(s.getDate());o.push(l+"/"+c+"/"+d),u+=r}else for(var u=n,f=a+r;u<f;){var s=new Date(u),l=s.getFullYear(),c=this.addZero(s.getMonth()+1),d=this.addZero(s.getDate());o.push(l+"/"+c+"/"+d),u+=r}return o},formatDate:function(t,e){"string"==typeof t&&(t=t.replace(/[\D]/g,"/"));var a=new Date(t),n={"m+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"i+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e}};t.exports=a},function(t,e,a){!function(e,a){t.exports=a()}(this,function(){"use strict";var t,e,n={},r=a(1);t={init:function(t){var e=this.createHeader(),a=this.createContent(t),n=this.createBottom(),r=$("<div class='ChDatePicker_con'>"+e+a+n+"</div>");return r},createHeader:function(){return""},createContent:function(t){for(var e='<div class="ChDatePicker_con_calendar">',a=0;a<t.number;a++)e+="<div class='ChDatePicker_con_calendar_list'></div>";return e+="</div>"},createBottom:function(){var t='<div class="ChDatePicker_con_operation"><a class="ChDatePicker_confirm" data-type="confirm" href="javascript:;">确定</a><a class="ChDatePicker_cancel" data-type="cancel" href="javascript:;">取消</a></div>';return t}},e={init:function(t){var e=$.extend(!0,{},t),a=e.$target.parent();this.setInputVal(e),e.$target.remove();var n=$("<div class='ChDatePicker'></div>").append(e.$target),r=this;a.append(n),t.$html=e.$html=n,e.$target.on("focus",function(){e.calendarList||(r.reloadCalendar(e),r.eventBind(e,t))}),r.watchEvent(e,t),n.on("click",function(t){t.stopPropagation(),t.preventDefault()})},setInputVal:function(t){t.$target.val(r.util.formatDate(t.o.date.start,"yyyy/mm/dd")+"-"+r.util.formatDate(t.o.date.end,"yyyy/mm/dd"))},reloadCalendar:function(e,a){var n=e.childCalendar.number;e.domConfig={number:n};var i=t.init(e.domConfig),o=[],s=this,l=i.find(".ChDatePicker_con_calendar_list");e.$target.after(i),i.on("click",function(t){t.stopPropagation(),t.preventDefault()}),$(document).on("click.Double",function(){s.close(e),$(document).off("click.Double")}),l.each(function(t){var a=$.extend(!0,{},e.o,e.childCalendar[t]),n=a.currentDate||a.date.start;n=r.util.formatDate(n,"yyyy/mm/dd"),a.currentDate=a.currentDate||r.util.calculationMonth(n,t),o.push(new r($(this),$.extend(!0,{},a)))}),e.calendarList=o},watchEvent:function(t,e){var a=this;$(e).on("setDate",function(e,n){t.o.date=n.date?n.date:t.o.date,a.setInputVal(t)})},eventBind:function(t,e){var a=this;t.calendarList.forEach(function(e,a){!function(){$(e).on("pre",function(e,n){t.calendarList.forEach(function(t,e,i){a!=e&&(a<e?t.setCurrentPanels({currentDate:r.util.formatDate(r.util.calculationMonth(n.currentDate,1),"yyyy/mm/dd")}):t.setCurrentPanels({currentDate:r.util.formatDate(r.util.calculationMonth(n.currentDate,-1),"yyyy/mm/dd")}))})}),$(e).on("next",function(e,n){t.calendarList.forEach(function(t,e,i){a!=e&&(a<e?t.setCurrentPanels({currentDate:r.util.formatDate(r.util.calculationMonth(n.currentDate,1),"yyyy/mm/dd")}):t.setCurrentPanels({currentDate:r.util.formatDate(r.util.calculationMonth(n.currentDate,-1),"yyyy/mm/dd")}))})}),$(e).on("changeDay",function(e,n){var r=this.o.date;t.calendarList.forEach(function(t,e,n){a!=e&&t.setDates({start:r.start,end:r.end})})}),$(e).on("changeMonth",function(e,n){t.calendarList.forEach(function(t,e,i){a!=e&&(a<e?t.setCurrentPanels({currentDate:r.util.formatDate(r.util.calculationMonth(n,1),"yyyy/mm/dd")}):t.setCurrentPanels({currentDate:r.util.formatDate(r.util.calculationMonth(n,-1),"yyyy/mm/dd")}))})})}(a)}),t.$html.find(".ChDatePicker_confirm").on("click",function(){a.confirm(t,e)}),t.$html.find(".ChDatePicker_cancel").on("click",function(){a.cancel(t,e)})},close:function(t){t.$html.find(".ChDatePicker_con").remove(),t.calendarList.forEach(function(t,e){t.dispose(),t=null}),t.calendarList=null},confirm:function(t,e){e.o.date=t.o.date=$.extend(!0,{},t.calendarList[0].o.date),this.setInputVal(t),this.close(t),$(e).trigger("confirm")},cancel:function(t,e){this.close(t),$(e).trigger("cancel")}};var i=function(t,a){var r=$.extend(!0,{},n,a);this.childCalendar=r.calendar,r.calendar=null,this.o=r,this.$target=$(t),e.init(this)};return i.prototype={setDates:function(t,e){var a={start:r.util.formatDate(t.start,"yyyy/mm/dd"),end:r.util.formatDate(t.end,"yyyy/mm/dd")};$(this).trigger("setDate",[{date:a,callback:e}])}},i})},function(t,e,a){!function(e,a){t.exports=a()}(this,function(){"use strict";var t,e,n={date:{start:new Date,end:new Date},intervals:{show:!1}},r=a(1);t={},e={init:function(t){var e=$.extend(!0,{},t);e.$target.parent();this.setInputVal(e);var a=$("<div class='ChDatePicker'></div>"),n=this;e.$target.after(a),e.$target.remove(),a.append(e.$target),t.$html=e.$html=a,e.$target.on("focus",function(){e.calendar||(n.reloadCalendar(e),n.eventBind(e,t))}),n.watchEvent(e,t),a.on("click",function(t){t.stopPropagation(),t.preventDefault()})},setInputVal:function(t){t.$target.val(r.util.formatDate(t.o.date.start,"yyyy/mm/dd"))},reloadCalendar:function(t,e){var a=$("<div class='normal'></div>"),n=this;t.$html.append(a),t.calendar=new r(a,$.extend(!0,{},t.o)),t.$html.on("click",function(t){t.stopPropagation(),t.preventDefault()}),$(document).on("click.Double",function(){t.calendar&&n.close(t),$(document).off("click.Double")})},eventBind:function(t,e){var a=this;$(t.calendar).on("changeDay",function(n,r){var i=this.o.date;this.setDates({start:i.start,end:i.end}),t.o.date=i,a.setInputVal(t),a.close(t),$(e).trigger("confirm")})},watchEvent:function(t,e){var a=this;$(e).on("setDate",function(e,n){t.o.date=n.date?n.date:t.o.date,a.setInputVal(t)})},close:function(t){t.$html.find(".normal").remove(),t.calendar.dispose(),t.calendar=null}};var i=function(t,a){this.$target=$(t),this.o=$.extend(!0,{},n,a),e.init(this)};return i.prototype={},i})}])});