!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ChCalendar.Normal=e()}(this,function(){"use strict";var t,e={date:{start:new Date,end:new Date},intervals:{show:!1}},n=require("../ChCalendar");t={init:function(t){var e=$.extend(!0,{},t);e.$target.parent();this.setInputVal(e);var n=$("<div class='ChDatePicker'></div>"),a=this;e.$target.after(n),e.$target.remove(),n.append(e.$target),t.$html=e.$html=n,e.$target.on("focus",function(){e.calendar||(a.reloadCalendar(e),a.eventBind(e,t))}),a.watchEvent(e,t),n.on("click",function(t){t.stopPropagation(),t.preventDefault()})},setInputVal:function(t){t.$target.val(n.util.formatDate(t.o.date.start,"yyyy/mm/dd"))},reloadCalendar:function(t,e){var a=$("<div class='normal'></div>"),o=this;t.$html.append(a),t.calendar=new n(a,$.extend(!0,{},t.o)),t.$html.on("click",function(t){t.stopPropagation(),t.preventDefault()}),$(document).on("click.Double",function(){t.calendar&&o.close(t),$(document).off("click.Double")})},eventBind:function(t,e){var n=this;$(t.calendar).on("changeDay",function(a,o){var i=this.o.date;this.setDates({start:i.start,end:i.end}),t.o.date=i,n.setInputVal(t),n.close(t),$(e).trigger("confirm")})},watchEvent:function(t,e){var n=this;$(e).on("setDate",function(e,a){t.o.date=a.date?a.date:t.o.date,n.setInputVal(t)})},close:function(t){t.$html.find(".normal").remove(),t.calendar.dispose(),t.calendar=null}};var a=function(n,a){this.$target=$(n),this.o=$.extend(!0,{},e,a),t.init(this)};return a.prototype={},a});